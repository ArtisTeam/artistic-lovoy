<script type="text/javascript">
  document.title = document.title + " | Edit Event";
</script>

<div class="container">
  <h2><%= (!!event)? 'Edit event' : 'New event' %> </h2>
  <form id="editEventForm" method="post" 
        action="/event/<%= (!!event)? event.id + '/edit' : '/new' %>">
    <div class="form-group">
      <label for="name">Event Name: </label>
      <input type="text" class="form-control" id="event" name="name" 
             placeholder="Name for event"
             value="<%= ((!!event) && (!!event.get('name')))?event.get('name'):'' %>"/>
    </div>
    <div class="form-group">
      <label for="description">Event Description: </label>
      <textarea rows="6" type="text" class="form-control" id="description" name="description" 
                placeholder="Description for event"><%= ((!!event) && (!!event.get('description')))?event.get('description'):'' %></textarea>
    </div>
    <div class="form-group">
      <label for="maxParticipant">Max number of participant: </label>
      <input type="text" class="form-control" id="maxParticipant" name="maxParticipant" 
             placeholder="Maximum number of participant"
             value="<%= ((!!event) && (!!event.get('maxParticipant')))?event.get('maxParticipant'):'' %>"/>
    </div>
    <button type="submit" class="btn btn-primary">Save</button>
  </form>
</div>

<script>
$(document).ready(function() {
    $('#editEventForm').formValidation({
        framework: 'bootstrap',
        icon: {
            valid: 'glyphicon glyphicon-ok',
            invalid: 'glyphicon glyphicon-remove',
            validating: 'glyphicon glyphicon-refresh'
        },
        fields: {

          name: {
            validators: {
              notEmpty: {
                message: 'The name is required'
              },
              stringLength: {
                min: 6,
                max: 50,
                message: 'The name must be more than 6 and less than 50 characters long'
              },
              regexp: {
                  regexp: /^[\sa-zA-Z0-9_]+$/,
                  message: 'The name can only consist of alphabetical, number, space and underscore'
              }
            }
          },

          description: {
            validators: {
              notEmpty: {
                message: 'The description is required'
              },
              stringLength: {
                min: 6,
                max: 5000,
                message: 'The description must be more than 6 and less than 5000 characters long'
              }
            }
          },

          maxParticipant: {
            validators: {
              notEmpty: {
                message: 'Max number of participant is required'
              },
              integer: {
                message: 'The value is not an integer'
              },
              between: {
                min: 1,
                max: 500,
                message: 'The number of participant must be between 1 and 500'
              }
            }
          }

        }
    });
});
</script>